<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CSPL | Cognitive Science and Psycholinguistics Laboratory</title>
  <meta name="description" content="CSPL is Nepal's first cognitive science laboratory, directed by Dr. Lekhnath Sharma Pathak at Tribhuvan University. We investigate bilingual and multilingual cognition, parallel language activation, and psycholinguistics using mousetracking and eye-tracking methods.">
  <meta name="keywords" content="cognitive science Nepal, psycholinguistics lab, CSPL, Tribhuvan University, bilingualism, multilingualism, mousetracking, eye-tracking, Lekhnath Sharma Pathak, Sambit Rimal, parallel language activation, cognitive science Kathmandu, linguistics Nepal">
  <meta property="og:type" content="website">
  <meta property="og:title" content="CSPL | Cognitive Science and Psycholinguistics Laboratory">
  <meta property="og:description" content="Nepal's first cognitive science laboratory at Tribhuvan University, studying bilingual cognition, parallel language activation, and psycholinguistics.">
  <meta property="og:url" content="https://cogpsychling-lab.github.io/">
  <meta property="og:image" content="https://cogpsychling-lab.github.io/assets/img/cspl-logo.jpeg">
  <meta name="twitter:card" content="summary">
  <link rel="icon" type="image/svg+xml" href="assets/img/cspl-logo.svg">
  <link rel="stylesheet" href="assets/css/style.css">
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "ResearchOrganization",
    "name": "Cognitive Science and Psycholinguistics Laboratory",
    "alternateName": "CSPL",
    "url": "https://cogpsychling-lab.github.io/",
    "logo": "https://cogpsychling-lab.github.io/assets/img/fulllab_logo-removebg.png",
    "description": "Nepal's first cognitive science laboratory studying bilingual and multilingual cognition, parallel language activation, and psycholinguistics using mousetracking and eye-tracking methods.",
    "slogan": "Bracing the brain, minding the mind",
    "foundingDate": "2021",
    "founder": {
      "@type": "Person",
      "name": "Dr. Lekhnath Sharma Pathak",
      "jobTitle": "Assistant Professor",
      "affiliation": {
        "@type": "EducationalOrganization",
        "name": "Central Department of Linguistics, Tribhuvan University"
      },
      "url": "https://scholar.google.com/citations?user=Aor6eu8AAAAJ&hl=en"
    },
    "member": [
      {
        "@type": "Person",
        "name": "Dr. Karnakhar Khatiwada",
        "jobTitle": "Associate Professor"
      },
      {
        "@type": "Person",
        "name": "Sambit Rimal",
        "jobTitle": "Graduate Student Researcher"
      },
      {
        "@type": "Person",
        "name": "Mohan Gurung",
        "jobTitle": "MPhil-PhD Scholar"
      }
    ],
    "parentOrganization": {
      "@type": "EducationalOrganization",
      "name": "Tribhuvan University",
      "url": "https://tu.edu.np"
    },
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Kirtipur, Kathmandu",
      "addressCountry": "NP"
    },
    "knowsAbout": [
      "Cognitive Science",
      "Psycholinguistics",
      "Bilingualism",
      "Multilingualism",
      "Mousetracking",
      "Eye-tracking",
      "Parallel Language Activation",
      "Language Acquisition"
    ]
  }
  </script>
</head>
<body>

  <header class="site-header">
    <div class="container">
      <a href="index.html" class="site-brand">Cognitive Science and Psycholinguistics Lab</a>
      <button class="nav-toggle" onclick="document.querySelector('.site-nav').classList.toggle('open')" aria-label="Menu">
        <span></span><span></span><span></span>
      </button>
      <nav class="site-nav">
        <a href="index.html" class="active">Home</a>
        <a href="people.html">People</a>
        <a href="publications.html">Publications</a>
        <a href="workshops.html">Events &amp; Trainings</a>
      </nav>
    </div>
  </header>

  <main>

    <!-- ── Hero ── -->
    <section class="hero">
      <div class="container container--wide">
        <div class="hero-inner">
          <div class="hero-visual">
            <img src="assets/img/fulllab_logo-removebg.png" alt="CSPL Lab Logo" class="hero-logo">
          </div>
          <div class="hero-text">
            <p class="subtitle">
              Nepal's first and only experimental laboratory studying how bilingualism,
              multilingualism, literacy, and culture shape the mind.
            </p>
            <p class="motto">Bracing the brain, minding the mind</p>
            <div class="hero-actions">
              <a href="people.html" class="btn-primary">Meet the Team</a>
              <a href="publications.html" class="btn-ghost">Publications</a>
            </div>
            <div class="hero-meta">
              <span>Kirtipur, Kathmandu</span>
              <span class="sep">·</span>
              <span>Tribhuvan University</span>
              <span class="sep">·</span>
              <span>Est. 2021</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ── Collab strip ── -->
    <div class="collab-strip">
      <div class="container container--wide collab-strip-inner">
        <span class="collab-label">Collaborators</span>
        <ul class="collab-list">
          <li><a href="https://www.uzh.ch/en.html" target="_blank" rel="noopener">University of Zürich</a></li>
          <li><a href="https://nccr-evolvinglanguage.ch/" target="_blank" rel="noopener">NCCR Evolving Language</a></li>
        </ul>
      </div>
    </div>

    <!-- ── Our Story / News (tabbed) ── -->
    <section class="section fade-in">
      <div class="container container--wide">

        <div class="tab-row">
          <button class="tab-btn active" data-tab="story">Our Story</button>
          <button class="tab-btn" data-tab="news">News</button>
        </div>

        <!-- Our Story panel -->
        <div class="tab-panel" id="tab-story">
          <div class="home-two-col">
            <div>
              <p class="label">About</p>
              <h2>Our Story</h2>
              <div class="rule-accent"></div>
              <p style="font-size:0.88rem;line-height:1.8;color:var(--color-text);margin-bottom:1rem;">
                The <strong>Cognitive Science and Psycholinguistics Laboratory (CSPL)</strong>
                was founded in February 2021 at the Central Department of Linguistics,
                Tribhuvan University, the first and only laboratory of its kind in Nepal.
              </p>
              <p style="font-size:0.88rem;line-height:1.8;color:var(--color-text);margin-bottom:1rem;">
                We investigate parallel language activation among bilinguals and multilinguals
                and its cognitive mechanisms, using mousetracking as a platform for online
                measurement of continuous dynamics of cognitive processing.
              </p>
              <p style="font-size:0.86rem;line-height:1.8;color:var(--color-text-secondary);">
                Nepal's extraordinary multilingual landscape, with over 120 languages across
                multiple language families, provides a unique setting for studying how the
                human mind manages competing linguistic representations in non-WEIRD populations.
                Our work bridges cognitive science and linguistics in a region where experimental
                approaches to language are only beginning to take root.
              </p>
            </div>
            <div>
              <p class="label">Timeline</p>
              <h2>Key milestones</h2>
              <div class="rule-accent"></div>
              <div class="timeline">
                <div class="timeline-item">
                  <span class="timeline-year">2021</span>
                  <span class="timeline-text">Lab founded at CDL, Tribhuvan University. First of its kind in Nepal</span>
                </div>
                <div class="timeline-item">
                  <span class="timeline-year">2021</span>
                  <span class="timeline-text">First publication: L2 instruction enhances L1 abilities (JCCS)</span>
                </div>
                <div class="timeline-item">
                  <span class="timeline-year">2023</span>
                  <span class="timeline-text">Contribution to cross-linguistic spatial communication study in <em>Nature Human Behaviour</em></span>
                </div>
                <div class="timeline-item">
                  <span class="timeline-year">2025</span>
                  <span class="timeline-text">Two papers in top international journals: <em>Bilingualism: Language and Cognition</em> and <em>International Journal of Bilingualism</em></span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- News panel -->
        <div class="tab-panel hidden" id="tab-news">
          <p class="label">Latest</p>
          <h2>News</h2>
          <div class="rule-accent"></div>
          <div class="home-two-col">
            <ul class="news-list">
              <li class="news-item">
                <time class="news-date" datetime="2026-02">Feb 2026</time>
                <span class="news-text">Lab website is live. Welcome to our online home.</span>
              </li>
              <li class="news-item">
                <time class="news-date" datetime="2026-02">Feb 2026</time>
                <span class="news-text">
                  3-day <strong>PsychoPy &amp; EEG Workshop</strong> held with
                  Dr. Laura Giglio (University of Zürich).
                </span>
              </li>
              <li class="news-item">
                <time class="news-date" datetime="2026-01">Jan 2026</time>
                <span class="news-text">
                  <strong>Team Synaptic</strong>, associated with the lab, won the
                  Hult Prize at Kathmandu University for AR/AI-based technology
                  supporting vocabulary acquisition in children with autism.
                </span>
              </li>
            </ul>
            <ul class="news-list">
              <li class="news-item">
                <time class="news-date" datetime="2025-10">Oct 2025</time>
                <span class="news-text">
                  Lab member Sambit Rimal awarded the <strong>CogSci × Gorilla Grant 2025</strong>
                   for trilingual cognitive control research.
                </span>
              </li>
              <li class="news-item">
                <time class="news-date" datetime="2025">2025</time>
                <span class="news-text">
                  <strong>Pathak, Pathak &amp; Mishra</strong> published in the
                  <em>International Journal of Bilingualism</em>, the lab's first
                  international journal publication.
                </span>
              </li>
              <li class="news-item">
                <time class="news-date" datetime="2024">2024</time>
                <span class="news-text">
                  Joint cross-cultural psycholinguistics workshop with
                  University of Zürich / NCCR Evolving Language at Kirtipur.
                </span>
              </li>
            </ul>
          </div>
        </div>

      </div>
    </section>

    <!-- ── Research ── -->
    <section class="section section--research fade-in">
      <div class="container container--wide">
        <p class="label">Research</p>
        <h2>What drives our work</h2>
        <p style="font-size:0.88rem;line-height:1.75;color:var(--color-text-secondary);margin:6px 0 28px;">
          Most of what we know about how the brain handles multiple languages comes from labs in the West, studying Western (WEIRD) populations. We work in a place
          where speaking three or four languages is ordinary life, and ask what that means for the mind.
        </p>
        <div class="research-grid fade-in-children">
          <div class="research-card">
            <svg class="research-icon" width="26" height="26" viewBox="0 0 30 20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" aria-hidden="true">
              <circle cx="10" cy="10" r="8"/>
              <circle cx="20" cy="10" r="8"/>
            </svg>
            <h3>Parallel language activation</h3>
            <p>
              How does the brain manage multiple languages at once? We study
              how bilinguals and trilinguals activate, select, and inhibit
              competing languages during comprehension and production, and
              what that tells us about cognitive control more broadly.
            </p>
          </div>
          <div class="research-card">
            <svg class="research-icon" width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
              <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
            </svg>
            <h3>Bilingualism, literacy &amp; cognition</h3>
            <p>
              How do bilingualism, biliteracy, and language of instruction
              shape cognitive abilities? We examine the relationship between
              multilingual experience and executive function across different
              populations and educational contexts in Nepal.
            </p>
          </div>
        </div>

        <!-- ── Methods block ── -->
        <div class="methods-block fade-in">

          <div class="method-panel">
            <div class="method-panel-text">
              <p class="label">Primary paradigm</p>
              <h3>Mousetracking</h3>
              <p>Cursor trajectories capture the real-time competition between languages during lexical selection. Curvature toward a competitor target indexes the degree of parallel activation.</p>
            </div>
            <div class="method-panel-visual">
              <div class="method-canvas-wrap">
                <div class="method-canvas-caption"> Mouse-tracking  · overlaid trial trajectories</div>
                <canvas id="mt-canvas" aria-hidden="true"></canvas>
                <div class="method-canvas-legend">
                  <span class="mtleg" style="--lc:#C0392B">Error</span>
                  <span class="mtleg" style="--lc:#2C5F8A">Direct</span>
                  <span class="mtleg" style="--lc:#888">Competition-attracted</span>
                </div>
              </div>
            </div>
          </div>

          <div class="method-panel">
            <div class="method-panel-text">
              <p class="label">Complementary Paradigm</p>
              <h3>Eye-tracking</h3>
              <p>Fixation heatmaps reveal where and how long a reader's gaze lingers on each word, exposing the cognitive effort of lexical processing across languages and scripts in real time.</p>
            </div>
            <div class="method-panel-visual">
              <div class="method-canvas-wrap">
                <div class="method-canvas-caption">Reading fixation heatmap · simulated scanpath</div>
                <canvas id="vwp-canvas" aria-hidden="true"></canvas>
                <div class="method-canvas-legend">
                  <span class="mtleg" style="--lc:#D03020">Long fixation</span>
                  <span class="mtleg" style="--lc:#E8A820">Medium</span>
                  <span class="mtleg" style="--lc:#50B848">Short / skipped</span>
                </div>
              </div>
            </div>
          </div>

        </div>

      </div>
    </section>

  </main>

  <footer class="site-footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-address">
          <strong>Cognitive Science and Psycholinguistics Laboratory</strong><br>
          Central Department of Linguistics<br>
          Tribhuvan University, Kirtipur, Kathmandu, Nepal<br>
          <a href="mailto:lekhnath.pathak@cdl.tu.edu.np">lekhnath.pathak@cdl.tu.edu.np</a>
        </div>
        <div class="footer-links">
          <a href="https://github.com/cogpsychling-lab" target="_blank" rel="noopener" aria-label="GitHub">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>
          </a>
          <a href="https://www.linkedin.com/company/cognitive-science-and-psycholinguistics-lab-tu/" target="_blank" rel="noopener" aria-label="LinkedIn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
          </a>
        </div>
      </div>
      <div class="footer-bottom">
        <div class="footer-motto">Bracing the brain, minding the mind</div>
        Cognitive Science and Psycholinguistics Laboratory, Tribhuvan University
      </div>
    </div>
  </footer>

  <script>
    /* ── Scroll animations ── */
    document.addEventListener('DOMContentLoaded', () => {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) entry.target.classList.add('visible');
        });
      }, { threshold: 0.1 });
      document.querySelectorAll('.fade-in, .fade-in-children').forEach(el => observer.observe(el));
    });

    /* ── Tab switching (Our Story / News) ── */
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-panel').forEach(p => p.classList.add('hidden'));
        btn.classList.add('active');
        document.getElementById('tab-' + btn.dataset.tab).classList.remove('hidden');
      });
    });

    /* ── Mousetracking canvas — bezier overlaid trajectories ── */
    (function () {
      const canvas = document.getElementById('mt-canvas');
      if (!canvas) return;
      const ctx = canvas.getContext('2d');
      const dpr = Math.min(window.devicePixelRatio || 1, 2);

      /* landscape screen-like proportions */
      const W0 = 420, H0 = 240;
      const BW = 90, BH = 30;
      const TL = [76,  28];  /* top-left  — competitor */
      const TR = [344, 28];  /* top-right — target     */
      const S  = [210, 202]; /* bottom-center — start  */
      const N = 90;

      /* deterministic RNG for reproducible per-trail jitter */
      function mkRng(seed) {
        let s = seed | 0 || 1;
        return function () { s = (s * 16807) % 2147483647; return (s - 1) / 2147483646; };
      }

      function bezPt(t, p0, p1, p2, p3) {
        const u = 1 - t;
        return {
          x: u*u*u*p0[0] + 3*u*u*t*p1[0] + 3*u*t*t*p2[0] + t*t*t*p3[0],
          y: u*u*u*p0[1] + 3*u*u*t*p1[1] + 3*u*t*t*p2[1] + t*t*t*p3[1],
        };
      }

      /* generate trajectory with optional per-point jitter */
      function gen(p1, p2, dest, jit, seed) {
        const rng = mkRng(seed || 7);
        const pts = [];
        for (let i = 0; i <= N; i++) {
          const pt = bezPt(i / N, S, p1, p2, dest);
          /* jitter tapers to zero at start & end so endpoints stay anchored */
          const fade = Math.sin(Math.PI * i / N);
          const j = (jit || 0) * fade;
          pt.x += (rng() - 0.5) * j;
          pt.y += (rng() - 0.5) * j * 0.6;
          pts.push(pt);
        }
        return pts;
      }

      const trails = [
        /* Red — error: cursor went to competitor and stayed */
        { pts: gen([100, 150], [68, 88],  TL, 2, 11), color: '#C0392B', lw: 1.5, op: 0.82 },
        { pts: gen([118, 156], [74, 82],  TL, 3, 23), color: '#C0392B', lw: 1.3, op: 0.62 },

        /* Blue — direct to target: minimal competition */
        { pts: gen([248, 155], [330, 90], TR, 2, 35), color: '#2C5F8A', lw: 1.5, op: 0.82 },
        { pts: gen([240, 148], [322, 84], TR, 2, 47), color: '#2C5F8A', lw: 1.3, op: 0.62 },
        { pts: gen([234, 162], [318, 96], TR, 3, 59), color: '#2C5F8A', lw: 1.2, op: 0.50 },

        /* Gray — competition-attracted: graded pull toward competitor, then
           correction to target. This fan is the signature of parallel
           activation — continuous cognitive competition made visible. */
        { pts: gen([5,   108], [205, 42], TR, 3, 61),  color: '#8A8A8A', lw: 1.15, op: 0.58 },
        { pts: gen([22,  114], [214, 44], TR, 3, 73),  color: '#8A8A8A', lw: 1.1,  op: 0.56 },
        { pts: gen([42,  118], [224, 48], TR, 2, 85),  color: '#8A8A8A', lw: 1.1,  op: 0.53 },
        { pts: gen([62,  122], [234, 52], TR, 3, 97),  color: '#8A8A8A', lw: 1.05, op: 0.50 },
        { pts: gen([82,  128], [244, 56], TR, 2, 109), color: '#8A8A8A', lw: 1.05, op: 0.47 },
        { pts: gen([102, 132], [254, 60], TR, 3, 121), color: '#8A8A8A', lw: 1.0,  op: 0.44 },
        { pts: gen([122, 136], [264, 64], TR, 2, 133), color: '#8A8A8A', lw: 1.0,  op: 0.42 },
        { pts: gen([140, 138], [274, 66], TR, 3, 145), color: '#8A8A8A', lw: 1.0,  op: 0.40 },
        { pts: gen([156, 142], [284, 70], TR, 2, 157), color: '#8A8A8A', lw: 0.95, op: 0.38 },
        { pts: gen([170, 146], [294, 74], TR, 2, 169), color: '#8A8A8A', lw: 0.95, op: 0.35 },
      ];

      function drawBox(cx, cy, label) {
        ctx.strokeStyle = 'rgba(0,0,0,0.6)';
        ctx.fillStyle   = 'rgba(255,255,255,0.88)';
        ctx.lineWidth   = 1;
        ctx.beginPath();
        ctx.roundRect(cx - BW/2, cy - BH/2, BW, BH, 5);
        ctx.fill(); ctx.stroke();
        ctx.textAlign = 'center'; ctx.textBaseline = 'middle';
        ctx.fillStyle = 'rgba(0,0,0,0.75)';
        ctx.font = '600 8.5px "DM Sans", system-ui, sans-serif';
        ctx.fillText(label, cx, cy);
      }

      function setSize() {
        const wW = canvas.parentElement ? canvas.parentElement.clientWidth : W0;
        const W = Math.min(W0, wW > 0 ? wW : W0);
        const H = Math.round(W * H0 / W0);
        canvas.width = W * dpr; canvas.height = H * dpr;
        canvas.style.width = W + 'px'; canvas.style.height = H + 'px';
        ctx.setTransform(dpr * W / W0, 0, 0, dpr * W / W0, 0, 0);
      }

      let p = 0;
      function draw() {
        ctx.clearRect(0, 0, W0, H0);

        /* outer border */
        ctx.strokeStyle = 'rgba(0,0,0,0.09)';
        ctx.lineWidth = 1;
        ctx.strokeRect(6, 6, W0-12, H0-12);

        /* trails */
        const mx = Math.floor(Math.min(p, 1) * N) + 1;
        trails.forEach(tr => {
          const sl = tr.pts.slice(0, mx);
          if (sl.length < 2) return;
          ctx.save();
          ctx.globalAlpha = tr.op;
          ctx.strokeStyle = tr.color;
          ctx.lineWidth   = tr.lw;
          ctx.lineCap = 'round'; ctx.lineJoin = 'round';
          ctx.beginPath();
          ctx.moveTo(sl[0].x, sl[0].y);
          for (let i = 1; i < sl.length; i++) ctx.lineTo(sl[i].x, sl[i].y);
          ctx.stroke();
          /* cursor dot at leading edge */
          if (p < 1) {
            const tip = sl[sl.length - 1];
            ctx.beginPath();
            ctx.arc(tip.x, tip.y, 2, 0, Math.PI * 2);
            ctx.fillStyle = tr.color;
            ctx.fill();
          }
          ctx.restore();
        });

        /* boxes on top of trails */
        drawBox(TL[0], TL[1], 'Competitor');
        drawBox(TR[0], TR[1], 'Target');
        drawBox(S[0],  S[1],  'Start');

        p += 0.008;
        if (p > 1.35) p = 0;
        requestAnimationFrame(draw);
      }

      setSize();
      window.addEventListener('resize', setSize);
      draw();
    }());

    /* ── Eye-tracking reading heatmap canvas ── */
    (function () {
      const canvas = document.getElementById('vwp-canvas');
      if (!canvas) return;
      const ctx = canvas.getContext('2d');
      const dpr = Math.min(window.devicePixelRatio || 1, 2);

      const W0 = 420, H0 = 220;
      const FONT = '600 18px "Source Serif 4", "Georgia", serif';
      const TEXT_Y = H0 / 2 + 4;

      /* Words with fixation properties.
         dur: relative fixation duration (0–1), drives heatmap radius & color.
         Content words → longer fixations; function words → short/skipped;
         novel/complex word (CogSciLing) → longest fixation. */
      const words = [
        { w: 'Welcome',     dur: 0.55 },
        { w: 'to',          dur: 0.12 },
        { w: 'CogSciLing',  dur: 0.95 },
        { w: 'Lab',         dur: 0.40 },
        { w: 'Website',     dur: 0.50 },
      ];

      /* Pre-measure word positions (run once after font loads) */
      let positions = [];   /* { x, y, wordW } per word */
      function measure() {
        ctx.font = FONT;
        const gap = 9;
        const allW = words.reduce((s, w) => s + ctx.measureText(w.w).width, 0) + gap * (words.length - 1);
        let cx = (W0 - allW) / 2;
        positions = words.map(w => {
          const ww = ctx.measureText(w.w).width;
          const pos = { x: cx + ww / 2, y: TEXT_Y, wordW: ww };
          cx += ww + gap;
          return pos;
        });
      }

      /* Heatmap color: green (short) → yellow (medium) → red (long) */
      function heatColor(dur) {
        if (dur < 0.35) return { r: 80,  g: 184, b: 72  };  /* green  */
        if (dur < 0.65) return { r: 232, g: 168, b: 32  };  /* yellow */
        return                  { r: 208, g: 48,  b: 32  };  /* red    */
      }

      function drawHeatBlob(x, y, dur, alpha) {
        const r = 12 + dur * 26;   /* radius scales with fixation duration */
        const c = heatColor(dur);
        const grad = ctx.createRadialGradient(x, y, 0, x, y, r);
        grad.addColorStop(0,   'rgba(' + c.r + ',' + c.g + ',' + c.b + ',' + (0.55 * alpha) + ')');
        grad.addColorStop(0.5, 'rgba(' + c.r + ',' + c.g + ',' + c.b + ',' + (0.25 * alpha) + ')');
        grad.addColorStop(1,   'rgba(' + c.r + ',' + c.g + ',' + c.b + ',0)');
        ctx.fillStyle = grad;
        ctx.beginPath();
        ctx.arc(x, y, r, 0, Math.PI * 2);
        ctx.fill();
      }

      /* Animation: each fixation takes ~0.14 of total progress;
         they overlap slightly to feel like natural saccade timing. */
      const FIX_DUR = 0.14;
      const FIX_GAP = 0.12;
      const TOTAL = FIX_GAP * (words.length - 1) + FIX_DUR;  /* ≈ 0.62 */

      let progress = 0;

      function draw() {
        ctx.clearRect(0, 0, W0, H0);

        /* outer border */
        ctx.strokeStyle = 'rgba(0,0,0,0.09)';
        ctx.lineWidth = 1;
        ctx.strokeRect(6, 6, W0 - 12, H0 - 12);

        /* draw text */
        ctx.font = FONT;
        ctx.fillStyle = 'rgba(0,0,0,0.72)';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        words.forEach((w, i) => {
          ctx.fillText(w.w, positions[i].x, positions[i].y);
        });

        /* draw heatmap blobs & saccade path */
        const p = Math.min(progress, 1);
        let prevFix = null;

        words.forEach((w, i) => {
          const fixStart = i * FIX_GAP;
          const fixEnd   = fixStart + FIX_DUR;
          if (p <= fixStart) return;

          /* fade-in during this fixation's window */
          const local = Math.min((p - fixStart) / FIX_DUR, 1);
          const alpha = Math.min(local * 1.6, 1);  /* ramp up quickly */

          const pos = positions[i];
          drawHeatBlob(pos.x, pos.y, w.dur, alpha);

          /* saccade line from previous fixation */
          if (prevFix) {
            ctx.save();
            ctx.globalAlpha = 0.18;
            ctx.strokeStyle = '#555';
            ctx.lineWidth = 0.8;
            ctx.setLineDash([2, 2]);
            ctx.beginPath();
            ctx.moveTo(prevFix.x, prevFix.y);
            ctx.lineTo(pos.x, pos.y);
            ctx.stroke();
            ctx.setLineDash([]);
            ctx.restore();
          }

          /* small fixation dot */
          ctx.save();
          ctx.globalAlpha = alpha * 0.7;
          ctx.fillStyle = '#333';
          ctx.beginPath();
          ctx.arc(pos.x, pos.y - 1, 1.5, 0, Math.PI * 2);
          ctx.fill();
          ctx.restore();

          prevFix = pos;
        });

        progress += 0.005;
        if (progress > 1.5) progress = 0;
        requestAnimationFrame(draw);
      }

      function setSize() {
        const wW = canvas.parentElement ? canvas.parentElement.clientWidth : W0;
        const W = Math.min(W0, wW > 0 ? wW : W0);
        const H = Math.round(W * H0 / W0);
        canvas.width = W * dpr; canvas.height = H * dpr;
        canvas.style.width = W + 'px'; canvas.style.height = H + 'px';
        ctx.setTransform(dpr * W / W0, 0, 0, dpr * W / W0, 0, 0);
        measure();
      }

      setSize();
      window.addEventListener('resize', setSize);
      draw();
    }());
  </script>

</body>
</html>
